{"remainingRequest":"/home/runner/work/CF12_228142/CF12_228142/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/runner/work/CF12_228142/CF12_228142/node_modules/ecored-base-pkg/src/components/actividad/Actividad.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/ecored-base-pkg/src/components/actividad/Actividad.vue","mtime":499162500000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBzY3JlZW5DaGFuZ2VTb3VuZCBmcm9tICdAL2Fzc2V0cy9hY3RpdmlkYWQvYXVkaW8vc2NyZWVuLWNoYW5nZS5tcDMnCmltcG9ydCBzdWNjZXNzU291bmQgZnJvbSAnQC9hc3NldHMvYWN0aXZpZGFkL2F1ZGlvL3N1Y2Nlc3MubXAzJwppbXBvcnQgZmFpbFNvdW5kIGZyb20gJ0AvYXNzZXRzL2FjdGl2aWRhZC9hdWRpby9mYWlsLm1wMycKaW1wb3J0IGVuZEdhbWVTdWNjZXNzU291bmQgZnJvbSAnQC9hc3NldHMvYWN0aXZpZGFkL2F1ZGlvL2VuZC1nYW1lLXN1Y2Nlc3MubXAzJwppbXBvcnQgZW5kR2FtZUZhaWxTb3VuZCBmcm9tICdAL2Fzc2V0cy9hY3RpdmlkYWQvYXVkaW8vZW5kLWdhbWUtZmFpbC5tcDMnCmltcG9ydCBBY3RpdmlkYWRQcmVndW50YSBmcm9tICcuL0FjdGl2aWRhZFByZWd1bnRhJwppbXBvcnQgQWN0aXZpZGFkQmFycmFBdmFuY2UgZnJvbSAnLi9BY3RpdmlkYWRCYXJyYUF2YW5jZScKaW1wb3J0IEFjdGl2aWRhZFJlc3VsdGFkb3MgZnJvbSAnLi9BY3RpdmlkYWRSZXN1bHRhZG9zJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FjdGl2aWRhZCcsCiAgY29tcG9uZW50czogewogICAgQWN0aXZpZGFkUHJlZ3VudGEsCiAgICBBY3RpdmlkYWRCYXJyYUF2YW5jZSwKICAgIEFjdGl2aWRhZFJlc3VsdGFkb3MsCiAgfSwKICBwcm9wczogewogICAgY3Vlc3Rpb25hcmlvOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgbWV6Y2xhclJlc3B1ZXN0YXM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIGludGVudG9zOiAwLAogICAgcHJlZ3VudGFTZWxlY3RlZElkeDogMCwKICAgIHJlc3B1ZXN0YUFjdHVhbDoge30sCiAgICByZXNwdWVzdGFzOiBbXSwKICAgIGNvbnRpbnVhckRpc2FibGVkOiB0cnVlLAogICAgYXVkaW9FbmFibGVkOiB0cnVlLAogICAgdG90YWxQcmVndW50YXNPcmlnaW5hbGVzOiAwLAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICBwcmVndW50YXMoKSB7CiAgICAgIGNvbnN0IE1BWF9QUkVHVU5UQVMgPSAxMAogICAgICBjb25zdCB7IHByZWd1bnRhcyB9ID0gdGhpcy5jdWVzdGlvbmFyaW8KICAgICAgaWYgKCFwcmVndW50YXMpIHJldHVybiBbXQoKICAgICAgY29uc3QgcHJlZ3VudGFzQmFyYWphZGFzID0gdGhpcy5zaHVmZmxlKHByZWd1bnRhcykKCiAgICAgIGNvbnN0IHByZWd1bnRhc1NlbGVjY2lvbmFkYXMgPQogICAgICAgIHByZWd1bnRhc0JhcmFqYWRhcy5sZW5ndGggPj0gTUFYX1BSRUdVTlRBUwogICAgICAgICAgPyBwcmVndW50YXNCYXJhamFkYXMuc2xpY2UoMCwgTUFYX1BSRUdVTlRBUykKICAgICAgICAgIDogcHJlZ3VudGFzQmFyYWphZGFzCgogICAgICBjb25zb2xlLmxvZygKICAgICAgICAncHJlZ3VudGFzU2VsZWNjaW9uYWRhcycsCiAgICAgICAgcHJlZ3VudGFzU2VsZWNjaW9uYWRhcywKICAgICAgICAncHJlZ3VudGFzQmFyYWphZGFzJywKICAgICAgICBwcmVndW50YXNCYXJhamFkYXMsCiAgICAgICkKCiAgICAgIHJldHVybiBwcmVndW50YXNTZWxlY2Npb25hZGFzLm1hcChwcmVndW50YSA9PiAoewogICAgICAgIC4uLnByZWd1bnRhLAogICAgICAgIG9wY2lvbmVzOiBwcmVndW50YS5iYXJhamFyUmVzcHVlc3RhcwogICAgICAgICAgPyB0aGlzLnNodWZmbGUocHJlZ3VudGEub3BjaW9uZXMpCiAgICAgICAgICA6IHByZWd1bnRhLm9wY2lvbmVzLAogICAgICAgIGludGVudG9zOiB0aGlzLmludGVudG9zLAogICAgICB9KSkKICAgIH0sCiAgICBwcmVndW50YVNlbGVjdGVkKCkgewogICAgICByZXR1cm4gdGhpcy5wcmVndW50YXNbdGhpcy5wcmVndW50YVNlbGVjdGVkSWR4XQogICAgfSwKICAgIHBvcmNlbnRhamVBcHJvYmFkYXMoKSB7CiAgICAgIGlmICh0aGlzLnJlc3B1ZXN0YXMubGVuZ3RoID09PSAwKSByZXR1cm4gMAogICAgICBjb25zdCBhcHJvYmFkYXMgPSB0aGlzLnJlc3B1ZXN0YXMuZmlsdGVyKHIgPT4gci5lc0NvcnJlY3RhKS5sZW5ndGgKICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGFwcm9iYWRhcyAvIHRoaXMucmVzcHVlc3Rhcy5sZW5ndGgpICogMTAwKQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHNodWZmbGUoYXJyYXkpIHsKICAgICAgZm9yIChsZXQgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSkKICAgICAgICA7W2FycmF5W2ldLCBhcnJheVtqXV0gPSBbYXJyYXlbal0sIGFycmF5W2ldXQogICAgICB9CiAgICAgIHJldHVybiBhcnJheQogICAgfSwKICAgIC8qc2h1ZmZsZShhcnJheSkgewogICAgICBsZXQgY3VycmVudEluZGV4ID0gYXJyYXkubGVuZ3RoCiAgICAgIGxldCByYW5kb21JbmRleAogICAgICB3aGlsZSAoY3VycmVudEluZGV4ID4gMCkgewogICAgICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY3VycmVudEluZGV4KQogICAgICAgIGN1cnJlbnRJbmRleC0tCiAgICAgICAgO1thcnJheVtjdXJyZW50SW5kZXhdLCBhcnJheVtyYW5kb21JbmRleF1dID0gWwogICAgICAgICAgYXJyYXlbcmFuZG9tSW5kZXhdLAogICAgICAgICAgYXJyYXlbY3VycmVudEluZGV4XSwKICAgICAgICBdCiAgICAgIH0KICAgICAgcmV0dXJuIGFycmF5CiAgICB9LCovCiAgICBvblJyZXNwdWVzdGFTZWxlY3RlZChyZXNwdWVzdGFFc0NvcnJlY3RhKSB7CiAgICAgIHRoaXMuY29udGludWFyRGlzYWJsZWQgPSBmYWxzZQogICAgICB0aGlzLnJlc3B1ZXN0YUFjdHVhbCA9IHsKICAgICAgICBpZDogdGhpcy5wcmVndW50YVNlbGVjdGVkLmlkLAogICAgICAgIGVzQ29ycmVjdGE6IHJlc3B1ZXN0YUVzQ29ycmVjdGEsCiAgICAgIH0KICAgICAgaWYgKHJlc3B1ZXN0YUVzQ29ycmVjdGEpIHsKICAgICAgICB0aGlzLnJlcHJvZHVjaXJTb25pZG8oc3VjY2Vzc1NvdW5kKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVwcm9kdWNpclNvbmlkbyhmYWlsU291bmQpCiAgICAgIH0KICAgIH0sCiAgICBvbkNvbnRpbnVhcigpIHsKICAgICAgdGhpcy5jb250aW51YXJEaXNhYmxlZCA9IHRydWUKICAgICAgaWYgKHRoaXMucmVzcHVlc3RhQWN0dWFsLmlkKSB7CiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5yZXNwdWVzdGFzLmZpbmRJbmRleCgKICAgICAgICAgIHIgPT4gci5pZCA9PT0gdGhpcy5wcmVndW50YVNlbGVjdGVkLmlkLAogICAgICAgICkKICAgICAgICBpZiAoaWR4ID09PSAtMSkgewogICAgICAgICAgdGhpcy5yZXNwdWVzdGFzLnB1c2godGhpcy5yZXNwdWVzdGFBY3R1YWwpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucmVzcHVlc3Rhc1tpZHhdID0gdGhpcy5yZXNwdWVzdGFBY3R1YWwKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnByZWd1bnRhU2VsZWN0ZWRJZHggPCB0aGlzLnByZWd1bnRhcy5sZW5ndGggLSAxKSB7CiAgICAgICAgdGhpcy5wcmVndW50YVNlbGVjdGVkSWR4ICs9IDEKICAgICAgICB0aGlzLnJlcHJvZHVjaXJTb25pZG8oc2NyZWVuQ2hhbmdlU291bmQpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5maW5hbGl6YXJQcnVlYmEoKQogICAgICB9CiAgICB9LAogICAgb25SZWluaWNpYXIoKSB7CiAgICAgIHRoaXMucHJlZ3VudGFTZWxlY3RlZElkeCA9IDAKICAgICAgdGhpcy5yZXNwdWVzdGFzID0gW10KICAgICAgdGhpcy5yZXNwdWVzdGFBY3R1YWwgPSB7fQogICAgICB0aGlzLmludGVudG9zICs9IDEKICAgICAgdGhpcy4kZW1pdCgncmVpbmljaWFyJykKICAgIH0sCiAgICByZXByb2R1Y2lyU29uaWRvKGF1ZGlvU3JjKSB7CiAgICAgIGlmICh0aGlzLmF1ZGlvRW5hYmxlZCkgewogICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGF1ZGlvU3JjKQogICAgICAgIGF1ZGlvLnBsYXkoKQogICAgICB9CiAgICB9LAogICAgZmluYWxpemFyUHJ1ZWJhKCkgewogICAgICBjb25zdCB0b3RhbFByZWd1bnRhcyA9IHRoaXMucHJlZ3VudGFzLmxlbmd0aAogICAgICBjb25zdCByZXNwdWVzdGFzQ29ycmVjdGFzID0gdGhpcy5yZXNwdWVzdGFzLmZpbHRlcihyID0+IHIuZXNDb3JyZWN0YSkKICAgICAgICAubGVuZ3RoCiAgICAgIGNvbnN0IHBvcmNlbnRhamVBcHJvYmFjaW9uID0gKHJlc3B1ZXN0YXNDb3JyZWN0YXMgLyB0b3RhbFByZWd1bnRhcykgKiAxMDAKCiAgICAgIGlmIChwb3JjZW50YWplQXByb2JhY2lvbiA+PSA3MCkgewogICAgICAgIHRoaXMucmVwcm9kdWNpclNvbmlkbyhlbmRHYW1lU3VjY2Vzc1NvdW5kKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVwcm9kdWNpclNvbmlkbyhlbmRHYW1lRmFpbFNvdW5kKQogICAgICB9CiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["Actividad.vue"],"names":[],"mappings":";AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Actividad.vue","sourceRoot":"node_modules/ecored-base-pkg/src/components/actividad","sourcesContent":["<template>\n  <div class=\"tarjeta--blanca\">\n    <div class=\"row align-items-center mb-4\">\n      <div class=\"col-auto\">\n        <img src=\"@/assets/componentes/icon-actividad.svg\" alt=\"\" />\n      </div>\n      <div class=\"col \">\n        <h2 class=\"titulo-tercero mb-0\">\n          {{ cuestionario.titulo }}\n        </h2>\n        <p class=\"mb-0\" v-html=\"cuestionario.introduccion\"></p>\n      </div>\n    </div>\n    <div class=\"tarjeta tarjeta--lightest-gray px-4 pb-4 pt-4 px-md-5\">\n      <div\n        v-if=\"respuestas.length !== preguntas.length\"\n        class=\"d-flex justify-content-end mb-2\"\n      >\n        <div class=\"form-check form-switch\">\n          <input\n            id=\"switchCheckAudio\"\n            v-model=\"audioEnabled\"\n            class=\"form-check-input\"\n            type=\"checkbox\"\n          />\n          <label class=\"form-check-label\" for=\"switchCheckAudio\">Â¿Audio?</label>\n        </div>\n      </div>\n      <ActividadResultados\n        v-if=\"respuestas.length === preguntas.length\"\n        :respuestas=\"respuestas\"\n        :mensaje-aprobado=\"cuestionario.mensaje_final_aprobado\"\n        :mensaje-reprobado=\"cuestionario.mensaje_final_reprobado\"\n        :porcentaje-aprobadas=\"porcentajeAprobadas\"\n        :preguntas-count=\"preguntas.length\"\n        :total-preguntas-base=\"cuestionario.preguntas.length\"\n        @reiniciar=\"onReiniciar\"\n      />\n      <ActividadPregunta\n        v-else\n        :pregunta=\"preguntaSelected\"\n        :numero-pregunta=\"preguntaSelectedIdx + 1\"\n        @respuestaSelected=\"onRrespuestaSelected\"\n      />\n    </div>\n    <ActividadBarraAvance\n      :pregunta-index=\"preguntaSelectedIdx\"\n      :preguntas-count=\"preguntas.length\"\n      :respuestas-length=\"respuestas.length\"\n      :continuar-disabled=\"continuarDisabled\"\n      :respuestas=\"respuestas\"\n      class=\"mx-4 mx-md-5\"\n      @continuar=\"onContinuar\"\n      @reiniciar=\"onReiniciar\"\n    />\n  </div>\n</template>\n\n<script>\nimport screenChangeSound from '@/assets/actividad/audio/screen-change.mp3'\nimport successSound from '@/assets/actividad/audio/success.mp3'\nimport failSound from '@/assets/actividad/audio/fail.mp3'\nimport endGameSuccessSound from '@/assets/actividad/audio/end-game-success.mp3'\nimport endGameFailSound from '@/assets/actividad/audio/end-game-fail.mp3'\nimport ActividadPregunta from './ActividadPregunta'\nimport ActividadBarraAvance from './ActividadBarraAvance'\nimport ActividadResultados from './ActividadResultados'\nexport default {\n  name: 'Actividad',\n  components: {\n    ActividadPregunta,\n    ActividadBarraAvance,\n    ActividadResultados,\n  },\n  props: {\n    cuestionario: {\n      type: Object,\n      required: true,\n    },\n    mezclarRespuestas: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data: () => ({\n    intentos: 0,\n    preguntaSelectedIdx: 0,\n    respuestaActual: {},\n    respuestas: [],\n    continuarDisabled: true,\n    audioEnabled: true,\n    totalPreguntasOriginales: 0,\n  }),\n  computed: {\n    preguntas() {\n      const MAX_PREGUNTAS = 10\n      const { preguntas } = this.cuestionario\n      if (!preguntas) return []\n\n      const preguntasBarajadas = this.shuffle(preguntas)\n\n      const preguntasSeleccionadas =\n        preguntasBarajadas.length >= MAX_PREGUNTAS\n          ? preguntasBarajadas.slice(0, MAX_PREGUNTAS)\n          : preguntasBarajadas\n\n      console.log(\n        'preguntasSeleccionadas',\n        preguntasSeleccionadas,\n        'preguntasBarajadas',\n        preguntasBarajadas,\n      )\n\n      return preguntasSeleccionadas.map(pregunta => ({\n        ...pregunta,\n        opciones: pregunta.barajarRespuestas\n          ? this.shuffle(pregunta.opciones)\n          : pregunta.opciones,\n        intentos: this.intentos,\n      }))\n    },\n    preguntaSelected() {\n      return this.preguntas[this.preguntaSelectedIdx]\n    },\n    porcentajeAprobadas() {\n      if (this.respuestas.length === 0) return 0\n      const aprobadas = this.respuestas.filter(r => r.esCorrecta).length\n      return Math.round((aprobadas / this.respuestas.length) * 100)\n    },\n  },\n  methods: {\n    shuffle(array) {\n      for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1))\n        ;[array[i], array[j]] = [array[j], array[i]]\n      }\n      return array\n    },\n    /*shuffle(array) {\n      let currentIndex = array.length\n      let randomIndex\n      while (currentIndex > 0) {\n        randomIndex = Math.floor(Math.random() * currentIndex)\n        currentIndex--\n        ;[array[currentIndex], array[randomIndex]] = [\n          array[randomIndex],\n          array[currentIndex],\n        ]\n      }\n      return array\n    },*/\n    onRrespuestaSelected(respuestaEsCorrecta) {\n      this.continuarDisabled = false\n      this.respuestaActual = {\n        id: this.preguntaSelected.id,\n        esCorrecta: respuestaEsCorrecta,\n      }\n      if (respuestaEsCorrecta) {\n        this.reproducirSonido(successSound)\n      } else {\n        this.reproducirSonido(failSound)\n      }\n    },\n    onContinuar() {\n      this.continuarDisabled = true\n      if (this.respuestaActual.id) {\n        const idx = this.respuestas.findIndex(\n          r => r.id === this.preguntaSelected.id,\n        )\n        if (idx === -1) {\n          this.respuestas.push(this.respuestaActual)\n        } else {\n          this.respuestas[idx] = this.respuestaActual\n        }\n      }\n\n      if (this.preguntaSelectedIdx < this.preguntas.length - 1) {\n        this.preguntaSelectedIdx += 1\n        this.reproducirSonido(screenChangeSound)\n      } else {\n        this.finalizarPrueba()\n      }\n    },\n    onReiniciar() {\n      this.preguntaSelectedIdx = 0\n      this.respuestas = []\n      this.respuestaActual = {}\n      this.intentos += 1\n      this.$emit('reiniciar')\n    },\n    reproducirSonido(audioSrc) {\n      if (this.audioEnabled) {\n        const audio = new Audio(audioSrc)\n        audio.play()\n      }\n    },\n    finalizarPrueba() {\n      const totalPreguntas = this.preguntas.length\n      const respuestasCorrectas = this.respuestas.filter(r => r.esCorrecta)\n        .length\n      const porcentajeAprobacion = (respuestasCorrectas / totalPreguntas) * 100\n\n      if (porcentajeAprobacion >= 70) {\n        this.reproducirSonido(endGameSuccessSound)\n      } else {\n        this.reproducirSonido(endGameFailSound)\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\" scoped>\n.boton--disabled\n  opacity: 0.5\n  pointer-events: none\n\n.tarjeta--lightest-gray\n  border: 3px solid #dce4eb\n</style>\n"]}]}