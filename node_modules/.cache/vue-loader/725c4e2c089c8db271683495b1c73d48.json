{"remainingRequest":"/home/runner/work/CF12_228142/CF12_228142/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/runner/work/CF12_228142/CF12_228142/node_modules/ecored-base-pkg/src/components/Zoom.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/ecored-base-pkg/src/components/Zoom.vue","mtime":499162500000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/CF12_228142/CF12_228142/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBzbHlkZXJNaXhpbnMgZnJvbSAnLi4vbWl4aW5zL3NseWRlck1peGlucycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdab29tJywKICBtaXhpbnM6IFtzbHlkZXJNaXhpbnNdLAogIHByb3BzOiB7CiAgICBsZW50ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcxNTAnLAogICAgfSwKICAgIGJhamFSZXNvbHVjaW9uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycsCiAgICB9LAogICAgYWx0YVJlc29sdWNpb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJywKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgem9vbUxldmVsOiAxLAogICAgICBlbnRlcjogZmFsc2UsCiAgICAgIGlzQ2xpY2tlZDogZmFsc2UsCiAgICAgIGxlbnNPYmo6IHsKICAgICAgICB0b3A6IDAsCiAgICAgICAgbGVmdDogMCwKICAgICAgfSwKICAgICAgem9vbU9iajogewogICAgICAgIHRvcDogMCwKICAgICAgICBsZWZ0OiAwLAogICAgICB9LAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGV4dHJhTGVuc09iaigpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogdGhpcy5sZW50ZSArICdweCcsCiAgICAgICAgaGVpZ2h0OiB0aGlzLmxlbnRlICsgJ3B4JywKICAgICAgICB0cmFuc2Zvcm06IGBzY2FsZSgke3RoaXMuZW50ZXIgPyB0aGlzLnpvb21MZXZlbCA6IDB9KWAsCiAgICAgIH0KICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgZW50ZXIobmV3VmFsKSB7CiAgICAgIGlmICghbmV3VmFsKSB7CiAgICAgICAgdGhpcy56b29tTGV2ZWwgPSAxCiAgICAgIH0KICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkNsaWNrKCkgewogICAgICBpZiAoIXRoaXMuaXNDbGlja2VkKSB7CiAgICAgICAgdGhpcy5pc0NsaWNrZWQgPSB0cnVlCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrcykKICAgICAgfQogICAgfSwKICAgIGNsaWNrcyhlKSB7CiAgICAgIGlmIChlLnBhdGguZmluZCh4ID0+IHguaWQgPT0gYHpvb20tJHt0aGlzLm1haW5JZH1gKSkgewogICAgICAgIHRoaXMuJHJlZnMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy56b29tKQogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNDbGlja2VkKSB7CiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrcykKICAgICAgICB0aGlzLiRyZWZzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuem9vbSkKICAgICAgICB0aGlzLmlzQ2xpY2tlZCA9IGZhbHNlCiAgICAgIH0KICAgIH0sCiAgICBtb3ZlKGUpIHsKICAgICAgY29uc3Qgem9vbSA9IHRoaXMuJHJlZnMuem9vbQogICAgICBjb25zdCB6b29tSW1nID0gdGhpcy4kcmVmcy56b29tSW1nCgogICAgICBsZXQgcG9zWCwgcG9zWSwgb2Zmc2V0LCBwZXJjWCwgcGVyY1kKCiAgICAgIGlmIChlLnRvdWNoZXMpIHsKICAgICAgICBjb25zdCBpbWdDb3JkcyA9IGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCiAgICAgICAgcG9zWCA9IGUudG91Y2hlc1swXS5jbGllbnRYIC0gaW1nQ29yZHMueAogICAgICAgIHBvc1kgPSBlLnRvdWNoZXNbMF0uY2xpZW50WSAtIGltZ0NvcmRzLnkKICAgICAgICBvZmZzZXQgPSAxLjEKICAgICAgfSBlbHNlIHsKICAgICAgICBwb3NYID0gZS5vZmZzZXRYCiAgICAgICAgcG9zWSA9IGUub2Zmc2V0WQogICAgICAgIG9mZnNldCA9IDIKICAgICAgfQoKICAgICAgdGhpcy5sZW5zT2JqLnRvcCA9IGAke3Bvc1kgLSB6b29tLm9mZnNldEhlaWdodCAvIG9mZnNldH1weGAKICAgICAgdGhpcy5sZW5zT2JqLmxlZnQgPSBgJHtwb3NYIC0gem9vbS5vZmZzZXRXaWR0aCAvIG9mZnNldH1weGAKICAgICAgcGVyY1ggPSAocG9zWCAtIGUuc3JjRWxlbWVudC5vZmZzZXRMZWZ0KSAvIGUuc3JjRWxlbWVudC5vZmZzZXRXaWR0aAogICAgICBwZXJjWSA9IChwb3NZIC0gZS5zcmNFbGVtZW50Lm9mZnNldFRvcCkgLyBlLnNyY0VsZW1lbnQub2Zmc2V0SGVpZ2h0CgogICAgICBsZXQgem9vbUxlZnQgPSAtcGVyY1ggKiB6b29tSW1nLm9mZnNldFdpZHRoICsgem9vbS5vZmZzZXRXaWR0aCAvIDIKICAgICAgbGV0IHpvb21Ub3AgPSAtcGVyY1kgKiB6b29tSW1nLm9mZnNldEhlaWdodCArIHpvb20ub2Zmc2V0SGVpZ2h0IC8gMgoKICAgICAgdGhpcy56b29tT2JqLmxlZnQgPSBgJHt6b29tTGVmdH1weGAKICAgICAgdGhpcy56b29tT2JqLnRvcCA9IGAke3pvb21Ub3B9cHhgCiAgICB9LAogICAgem9vbShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICBlLmRlbHRhWSA+IDAgPyB0aGlzLnpvb21MZXZlbCsrIDogdGhpcy56b29tTGV2ZWwtLQogICAgICBpZiAodGhpcy56b29tTGV2ZWwgPCAxKSB0aGlzLnpvb21MZXZlbCA9IDEKICAgICAgaWYgKHRoaXMuem9vbUxldmVsID4gNSkgdGhpcy56b29tTGV2ZWwgPSA1CiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["Zoom.vue"],"names":[],"mappings":";AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Zoom.vue","sourceRoot":"node_modules/ecored-base-pkg/src/components","sourcesContent":["<template lang=\"pug\">\n.zoom\n  .zoom__img(\n    :id=\"`zoom-${mainId}`\"\n    ref=\"img\"\n    @mouseover=\"enter = true\"\n    @mouseleave=\"enter = false\"\n    @mousemove.prevent=\"move\"\n    @touchstart=\"enter = true\"\n    @touchend=\"enter = false\"\n    @touchmove.prevent=\"move\"\n    @click=\"onClick\"\n  )\n    img(:src=\"bajaResolucion\")\n  .zoom__lens(ref=\"zoom\" :style=\"[lensObj,extraLensObj]\" :class=\"{show:enter}\")\n    img(ref=\"zoomImg\" :src=\"altaResolucion\" :style=\"zoomObj\")\n\n  slot\n\n</template>\n\n<script>\nimport slyderMixins from '../mixins/slyderMixins'\nexport default {\n  name: 'Zoom',\n  mixins: [slyderMixins],\n  props: {\n    lente: {\n      type: String,\n      default: '150',\n    },\n    bajaResolucion: {\n      type: String,\n      default: '',\n    },\n    altaResolucion: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      zoomLevel: 1,\n      enter: false,\n      isClicked: false,\n      lensObj: {\n        top: 0,\n        left: 0,\n      },\n      zoomObj: {\n        top: 0,\n        left: 0,\n      },\n    }\n  },\n  computed: {\n    extraLensObj() {\n      return {\n        width: this.lente + 'px',\n        height: this.lente + 'px',\n        transform: `scale(${this.enter ? this.zoomLevel : 0})`,\n      }\n    },\n  },\n  watch: {\n    enter(newVal) {\n      if (!newVal) {\n        this.zoomLevel = 1\n      }\n    },\n  },\n  methods: {\n    onClick() {\n      if (!this.isClicked) {\n        this.isClicked = true\n        document.addEventListener('click', this.clicks)\n      }\n    },\n    clicks(e) {\n      if (e.path.find(x => x.id == `zoom-${this.mainId}`)) {\n        this.$refs.img.addEventListener('wheel', this.zoom)\n      } else if (this.isClicked) {\n        document.removeEventListener('click', this.clicks)\n        this.$refs.img.removeEventListener('wheel', this.zoom)\n        this.isClicked = false\n      }\n    },\n    move(e) {\n      const zoom = this.$refs.zoom\n      const zoomImg = this.$refs.zoomImg\n\n      let posX, posY, offset, percX, percY\n\n      if (e.touches) {\n        const imgCords = e.target.getBoundingClientRect()\n        posX = e.touches[0].clientX - imgCords.x\n        posY = e.touches[0].clientY - imgCords.y\n        offset = 1.1\n      } else {\n        posX = e.offsetX\n        posY = e.offsetY\n        offset = 2\n      }\n\n      this.lensObj.top = `${posY - zoom.offsetHeight / offset}px`\n      this.lensObj.left = `${posX - zoom.offsetWidth / offset}px`\n      percX = (posX - e.srcElement.offsetLeft) / e.srcElement.offsetWidth\n      percY = (posY - e.srcElement.offsetTop) / e.srcElement.offsetHeight\n\n      let zoomLeft = -percX * zoomImg.offsetWidth + zoom.offsetWidth / 2\n      let zoomTop = -percY * zoomImg.offsetHeight + zoom.offsetHeight / 2\n\n      this.zoomObj.left = `${zoomLeft}px`\n      this.zoomObj.top = `${zoomTop}px`\n    },\n    zoom(e) {\n      e.preventDefault()\n      e.deltaY > 0 ? this.zoomLevel++ : this.zoomLevel--\n      if (this.zoomLevel < 1) this.zoomLevel = 1\n      if (this.zoomLevel > 5) this.zoomLevel = 5\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\"></style>\n"]}]}